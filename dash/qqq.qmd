
---
title: "ìƒì›ì´ì˜ ì§‘ì„ ì°¾ì•„ì„œ"
format: 
  html:
    theme: cosmo
    page-layout: full
    dashboard: 
      orientation: rows
      sidebar:
        style: floating
        background: light
      body-width: full
      margin: 0
      padding: 1em
execute:
  echo: true
---

```{python}
import pandas as pd
df = pd.read_csv("../data/our_df.csv")
```

::: {.column width="400px"}
## ğŸ“ í•™êµì™€ì˜ ê±°ë¦¬ ë¶„í¬
```{python}
import plotly.express as px
px.histogram(df, x="dist_to_ISU", title="í•™êµ ê±°ë¦¬ ë¶„í¬").show()
```

## ğŸ›ï¸ ë°© ê°œìˆ˜
```{python}
px.histogram(df, x="BedroomAbvGr", title="ë°© ê°œìˆ˜ ë¶„í¬").show()
```

## ğŸ› ìš•ì‹¤ ê°œìˆ˜
```{python}
px.histogram(df, x="TotalFullBath", title="ìš•ì‹¤ ìˆ˜ ë¶„í¬").show()
```

## ğŸš— ì°¨ê³  ìˆ˜
```{python}
px.histogram(df, x="GarageCars", title="ì°¨ê³  ìˆ˜ ë¶„í¬").show()
```
:::

::: {.column width="600px"}
## ğŸ—ºï¸ ì§€ë„ ì‹œê°í™”

```{python}
import folium
from folium.plugins import MarkerCluster

isu_lat, isu_lon = 42.0267, -93.6465
m = folium.Map(location=[isu_lat, isu_lon], zoom_start=14, tiles='CartoDB positron')
folium.Circle([isu_lat, isu_lon], radius=2000, color='blue', fill=True, fill_opacity=0.05).add_to(m)
folium.Marker([isu_lat, isu_lon], tooltip="ISU", icon=folium.Icon(color="blue")).add_to(m)

cluster = MarkerCluster().add_to(m)
for _, row in df.iterrows():
    if row['dist_to_ISU'] <= 2000:
        popup = f"{row['HouseStyle']}ì¸µ / ğŸ› {row['BedroomAbvGr']} / ğŸ› {row['TotalFullBath']}"
        folium.Marker([row['Latitude'], row['Longitude']],
                      popup=popup,
                      icon=folium.Icon(color='red')).add_to(cluster)
m
```

:::

## ğŸ“ˆ Lasso íšŒê·€ ë¶„ì„

```{python}
from sklearn.linear_model import LassoCV
from sklearn.preprocessing import StandardScaler
from sklearn.pipeline import Pipeline
import plotly.graph_objects as go

X = df[['BedroomAbvGr', 'TotalFullBath', 'GarageCars', 'GarageArea', '2ndFlrSF', '1stFlrSF', 'dist_to_ISU']]
y = df['OverallCond']

pipeline = Pipeline([
    ("scaler", StandardScaler()),
    ("lasso", LassoCV(cv=5))
])
pipeline.fit(X, y)

coef = pipeline.named_steps['lasso'].coef_
feature_importance = pd.Series(coef, index=X.columns).sort_values()

fig = go.Figure([go.Bar(x=feature_importance.values, y=feature_importance.index, orientation='h')])
fig.update_layout(title="Lasso Feature Importance", xaxis_title="ê³„ìˆ˜ ê°’", yaxis_title="ë³€ìˆ˜")
fig.show()
```

## ğŸ… ìµœì¢… ì¶”ì²œ

```{python}
final = df[
    (df['dist_to_ISU'] <= 2000) &
    (df['BedroomAbvGr'] >= 3) &
    (df['TotalFullBath'] >= 2) &
    (df['GarageCars'] > 0)
].sort_values(by=['OverallCond', 'GarageArea'], ascending=False).head(1)

final
```
