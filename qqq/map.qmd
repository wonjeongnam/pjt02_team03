---
title: "ì§€ë„ ê¸°ë°˜ ì‹œê°í™”"
format:
  html:
    theme: cosmo
    toc: true
    toc-depth: 2
    code-fold: true
---

## ğŸ—ºï¸ ìš°ë¦¬ ì§‘, ìœ„ì¹˜ë¶€í„° ë”°ì ¸ë³´ì

ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì§‘ì€ ë§ì§€ë§Œ, **ìœ„ì¹˜**ëŠ” ìš°ë¦¬ì—ê²Œ ì •ë§ ì¤‘ìš”í•´ìš”.  
ì•„ë˜ ì„¸ ê°€ì§€ ê¸°ì¤€ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì§€ë„ ì‹œê°í™”ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ“ 1. ì•„ì´ì˜¤ì™€ ì£¼ë¦½ëŒ€í•™êµ(í•™êµ) ë°˜ê²½ 2km ì´ë‚´ ì§‘ ë¶„í¬

í•™êµì—ì„œ ë©€ì–´ì§ˆìˆ˜ë¡ ë“±í•˜êµê°€ ë¶ˆí¸í•˜ê³  êµí†µë¹„ë„ ì¦ê°€í•´ìš”.  
ìš°ì„  **í•™êµì—ì„œ ë°˜ê²½ 2km ì´ë‚´ì— ìˆëŠ” ì§‘ë“¤ë§Œ ì‹œê°í™”**í•´ë´¤ìŠµë‹ˆë‹¤.

```{python}
import pandas as pd
import folium
from folium.plugins import MarkerCluster

df = pd.read_csv("../data/our_df2.csv")
isu_lat, isu_lon = 42.0267, -93.6465

m = folium.Map(location=[isu_lat, isu_lon], zoom_start=14, tiles='CartoDB positron')
folium.Circle([isu_lat, isu_lon], radius=2000, color='blue', fill=True, fill_opacity=0.1, popup='ISU 2km').add_to(m)
folium.Marker([isu_lat, isu_lon], tooltip="Iowa State University", icon=folium.Icon(color="blue")).add_to(m)

cluster = MarkerCluster().add_to(m)
for _, row in df.iterrows():
    if row['dist_to_ISU'] <= 2000:
        popup = f"{row['HouseStyle']}ì¸µ / ğŸ› {row['BedroomAbvGr']} / ğŸ› {row['TotalFullBath']}"
        folium.Marker([row['Latitude'], row['Longitude']],
                      popup=popup,
                      icon=folium.Icon(color='green')).add_to(cluster)
m
```



ğŸŒˆ 2. ì¡°ê±´ ë§Œì¡±ë„ì— ë”°ë¼ ìƒ‰ìƒ êµ¬ë¶„
ìš°ë¦¬ íŒ€ì€ ì¡°ê±´ì„ ìˆ˜ì¹˜í™”í•´ì„œ ê° ì§‘ë§ˆë‹¤ ë§Œì¡±ë„ ì ìˆ˜ë¥¼ ê³„ì‚°í–ˆì–´ìš”.
ì•„ë˜ ì§€ë„ëŠ” ê° ì§‘ì˜ ì¡°ê±´ ë§Œì¡±ë„ ì ìˆ˜(score)ì— ë”°ë¼ ìƒ‰ìƒì´ ë‹¬ë¼ì§€ëŠ” ì‹œê°í™”ì˜ˆìš”.


```{python}

import numpy as np

df["score"] = (
    (df["dist_to_ISU"] <= 2000).astype(int) +
    (df["TotalFullBath"] >= 2).astype(int) +
    (df["BedroomAbvGr"] >= 2).astype(int) +
    (df["HouseStyle"] == 2).astype(int) +
    (df["1stFlrSF"] >= 1200).astype(int) +
    (df["2ndFlrSF"] != 0).astype(int) +
    (df["CentralAir"] == 'Y').astype(int) +
    (df["HeatingQC"].isin(['TA', 'Gd', 'Ex'])).astype(int) +
    (df["KitchenAbvGr"] >= 1).astype(int) +
    (df["KitchenQual"].isin(['TA', 'Gd', 'Ex'])).astype(int) +
    (df["GarageCars"] >= 1).astype(int) +
    (df["OverallCond"] >= 5).astype(int) + 
    (df['Street'] == 'Pave').astype(int) + 
    (df['SalePrice'] <= 280000).astype(int)
)

def get_color(score):
    if score >= 14:
        return "darkgreen"
    elif score >= 13:
        return "orange"
    else:
        return 'none'

score_map = folium.Map(location=[isu_lat, isu_lon], zoom_start=13, tiles='CartoDB positron')

for _, row in df.iterrows():
    color = get_color(row['score'])
    folium.CircleMarker(
        location=[row['Latitude'], row['Longitude']],
        radius=5,
        color=color,
        fill=True,
        fill_color=color,
        fill_opacity=0.7,
        popup=f"Score: {row['score']:.1f}"
    ).add_to(score_map)

score_map
```