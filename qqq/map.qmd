---
title: "ì§€ë„ ê¸°ë°˜ ì‹œê°í™”"
format:
  html:
    theme: cosmo
    toc: true
    toc-depth: 2
    code-fold: true
---

## ğŸ—ºï¸ ìƒì›ì´ì˜ ì§‘, ìœ„ì¹˜ë¶€í„° ë”°ì ¸ë³´ì

ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì§‘ì€ ë§ì§€ë§Œ, **ìœ„ì¹˜**ëŠ” ìš°ë¦¬ì—ê²Œ ì •ë§ ì¤‘ìš”í•´ìš”.  
ì•„ë˜ ì„¸ ê°€ì§€ ê¸°ì¤€ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì§€ë„ ì‹œê°í™”ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ“ 1. ì•„ì´ì˜¤ì™€ ì£¼ë¦½ëŒ€í•™êµ(í•™êµ) ë°˜ê²½ 2km ì´ë‚´ ì§‘ ë¶„í¬

í•™êµì—ì„œ ë©€ì–´ì§ˆìˆ˜ë¡ ë“±í•˜êµê°€ ë¶ˆí¸í•˜ê³  êµí†µë¹„ë„ ì¦ê°€í•´ìš”.  
ìš°ì„  **í•™êµì—ì„œ ë°˜ê²½ 2km ì´ë‚´ì— ìˆëŠ” ì§‘ë“¤ë§Œ ì‹œê°í™”**í•´ë´¤ìŠµë‹ˆë‹¤.

```{python}
import pandas as pd
import folium
from folium.plugins import MarkerCluster

df = pd.read_csv("../data/our_df.csv")
isu_lat, isu_lon = 42.0267, -93.6465

m = folium.Map(location=[isu_lat, isu_lon], zoom_start=14, tiles='CartoDB positron')
folium.Circle([isu_lat, isu_lon], radius=2000, color='blue', fill=True, fill_opacity=0.1, popup='ISU 2km').add_to(m)
folium.Marker([isu_lat, isu_lon], tooltip="Iowa State University", icon=folium.Icon(color="blue")).add_to(m)

cluster = MarkerCluster().add_to(m)
for _, row in df.iterrows():
    if row['dist_to_ISU'] <= 2000:
        popup = f"{row['HouseStyle']}ì¸µ / ğŸ› {row['BedroomAbvGr']} / ğŸ› {row['TotalFullBath']}"
        folium.Marker([row['Latitude'], row['Longitude']],
                      popup=popup,
                      icon=folium.Icon(color='green')).add_to(cluster)
m
```


ğŸï¸ 2. ê³µì› ë¶„í¬ (ì™¸ë¶€ë°ì´í„° í™œìš©)
ë³´ê²½ì´ëŠ” ëŸ¬ë‹ì„ ì¢‹ì•„í•´ìš”! ğŸƒâ€â™€ï¸
ë”°ë¼ì„œ ê·¼ì²˜ì— ê³µì›ì´ ìˆëŠ”ì§€ í™•ì¸ë„ í•„ìˆ˜ì˜ˆìš”.
OSM(OpenStreetMap)ì—ì„œ leisure=park ë°ì´í„°ë¥¼ í™œìš©í•´ Ames ë‚´ ê³µì› ë¶„í¬ë¥¼ í‘œì‹œí–ˆìŠµë‹ˆë‹¤.

```{python}
import osmnx as ox

leisure_facility_tags = {
    'park': {'leisure': 'park'},
    'garden': {'leisure': 'garden'},
    # 'playground': {'leisure': 'playground'},
    # 'dog_park': {'leisure': 'dog_park'},
    'sports_centre': {'leisure': 'sports_centre'},
    'pitch': {'leisure': 'pitch'},
    'track': {'leisure': 'track'},
    # 'swimming_pool': {'leisure': 'swimming_pool'},
    'stadium': {'leisure': 'stadium'},
}

# ğŸ‘‰ leisure ê°’ë§Œ ë½‘ì•„ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“  í›„ í•˜ë‚˜ë¡œ í•©ì³ì¤Œ
leisure_tags = {'leisure': [tag['leisure'] for tag in leisure_facility_tags.values()]}

# OSM ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
parks = ox.features_from_place("Ames, Iowa, USA", tags=leisure_tags)
print(len(parks))

park_map = folium.Map(location=[isu_lat, isu_lon], zoom_start=13, tiles='CartoDB positron')
for _, row in parks.iterrows():
    if 'geometry' in row and row.geometry.geom_type == 'Point':
        folium.CircleMarker(
            location=[row.geometry.y, row.geometry.x],
            radius=6,
            color='green',
            fill=True,
            fill_color='green',
            fill_opacity=0.6,
            popup=row.get("name", "Unnamed Park")
        ).add_to(park_map)

park_map
```


ğŸŒˆ 3. ì¡°ê±´ ë§Œì¡±ë„ì— ë”°ë¼ ìƒ‰ìƒ êµ¬ë¶„
ìš°ë¦¬ íŒ€ì€ ì¡°ê±´ì„ ìˆ˜ì¹˜í™”í•´ì„œ ê° ì§‘ë§ˆë‹¤ ë§Œì¡±ë„ ì ìˆ˜ë¥¼ ê³„ì‚°í–ˆì–´ìš”.
ì•„ë˜ ì§€ë„ëŠ” ê° ì§‘ì˜ ì¡°ê±´ ë§Œì¡±ë„ ì ìˆ˜(score)ì— ë”°ë¼ ìƒ‰ìƒì´ ë‹¬ë¼ì§€ëŠ” ì‹œê°í™”ì˜ˆìš”.

1.0ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì¡°ê±´ì„ ì™„ë²½íˆ ì¶©ì¡±

0.0ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì¡°ê±´ì„ ê±°ì˜ ë§Œì¡±í•˜ì§€ ëª»í•¨

```{python}

import numpy as np

# ì˜ˆì‹œë¡œ ì ìˆ˜ ìƒì„± (ì‹¤ì œëŠ” ì‚¬ì „ ê³„ì‚°ëœ score ì»¬ëŸ¼ ì‚¬ìš©)
df["score"] = (
    0.2 * (df["BedroomAbvGr"] >= 3).astype(int) +
    0.2 * (df["TotalFullBath"] >= 2).astype(int) +
    0.2 * (df["GarageCars"] > 0).astype(int) +
    0.2 * (df["HouseStyle"] == 2).astype(int) +
    0.2 * (df["dist_to_ISU"] <= 2000).astype(int)
)

def get_color(score):
    if score >= 0.8:
        return "darkgreen"
    elif score >= 0.6:
        return "lightgreen"
    elif score >= 0.4:
        return "orange"
    else:
        return "red"

score_map = folium.Map(location=[isu_lat, isu_lon], zoom_start=13, tiles='CartoDB positron')

for _, row in df.iterrows():
    color = get_color(row['score'])
    folium.CircleMarker(
        location=[row['Latitude'], row['Longitude']],
        radius=5,
        color=color,
        fill=True,
        fill_color=color,
        fill_opacity=0.7,
        popup=f"Score: {row['score']:.1f}"
    ).add_to(score_map)

score_map
```